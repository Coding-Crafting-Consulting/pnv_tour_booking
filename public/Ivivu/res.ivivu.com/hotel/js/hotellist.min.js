var App = function () { var e = function () { $("a.review-description").click(function () { $(this).parent().parent().find(".place-hotel-description").slideToggle() }), $(".capsule-control li").click(function () { $(this).hasClass("active") || $(this).addClass("active").siblings().removeClass("active").parent().siblings().each(function () { $(this).hasClass("hide") ? $(this).removeClass("hide") : $(this).addClass("hide") }) }) }, i = function () { function e() { var e = !1; return null != $("#detectMobileDiv").css("display") && void 0 != $("#detectMobileDiv").css("display") && "none" != $("#detectMobileDiv").css("display") && (e = !0), e } function i() { "block" == $("#displayHotelListFilter").css("display") ? ($("#displayHotelListFilter").slideUp(), $("#displayHotelListFilterButtonSymbol").html('<i class="glyphicon glyphicon-plus"></i>')) : ($("#displayHotelListFilter").slideDown(), $("#displayHotelListFilterButtonSymbol").html('<i class="glyphicon glyphicon-minus"></i>')) } function l() { t = e(), t && ($("#displayHotelListFilter").hide(), $(".panel-collapse").each(function () { $(this).removeClass("in") })) } var t = !1, s = $(window).width(); l(), $(window).resize(function () { $(this).width() != s && (s = $(this).width(), t = e(), t ? $(".panel-collapse").each(function () { $(this).removeClass("in") }) : $("#displayHotelListFilter").show(), $("#displayHotelListFilterButtonSymbol").html("block" == $("#displayHotelListFilter").css("display") ? '<i class="glyphicon glyphicon-minus"></i>' : '<i class="glyphicon glyphicon-plus"></i>')) }), $("#displayHotelListFilterButton").click(function () { i() }) }, l = function () { var e = $(".left-location").length; e > 6 ? ($(".btn-location").slice(0, 5).addClass("show"), $(".show-more").click(function () { var e = $(".show-more span:eq(0)").is(":visible"); e ? $(".btn-location").addClass("show") : $(".btn-location").slice(5).removeClass("show").addClass("hide"), $(this).siblings("ul").find(".place-expand").toggleClass("hide"), $(this).children().toggle() })) : ($(".btn-location").addClass("show"), $(".show-more").addClass("hide")); var i = $(".left-region").length; i > 6 ? ($(".btn-region").slice(0, 5).addClass("show"), $(".show-more-region").click(function () { var e = $(".show-more-region span:eq(0)").is(":visible"); e ? $(".btn-region").addClass("show") : $(".btn-region").slice(5).removeClass("show").addClass("hide"), $(this).siblings("ul").find(".place-expland").toggleClass("hide"), $(this).children().toggle() })) : ($(".btn-region").addClass("show"), $(".show-more-region").addClass("hide")) }, t = function () { var e = $("#list-nameregion").text(); "" != e && $(".predict-reiognname").html(e) }, s = function () { var e = $("#hdhdhdhhdhdhdhdhdhd").val(); "" != e ? $(".click-update").show() : $(".click-update").hide() }, o = function () { setInterval(s, 3e3) }, a = function () { function e(e) { return e.toFixed(0).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1.") } $("#findPriceForUpdate").click(function () { var i = Static.convertDate($("#datepicker-home-chkin").val()), l = Static.convertDate($("#datepicker-home-chkout").val()), t = $("#numberadults").val(), s = $("#numbertotalroom").val(); $("#findPriceForUpdateModel").modal("hide"); var o = $(".price-num-div").find("span").hasClass("price-call"); o && $(".price-num-div").find("span").removeClass("price-call pad-b-10 color-red").addClass("price-num"), $(".price-num").addClass("").text(""), $(".img-update").show(), $(".hotelItem").each(function () { var o = this, a = $(".hotelId-update", $(this)).val(); $(".allotment-available").hide(), $(".allotment-blocked").hide(), url = Static.rootpay() + "/yeu-cau-gia-phong-v2/" + a + "/" + i + "/" + l + "?adults=" + t + "&childs=0&totalRoom=" + s + "&key=" + $("#hdhdhdhhdhdhdhdhdhd").val(), $.getJSON(url, function (i) { if (null != i.HotelSearchResp && void 0 != i.HotelSearchResp) { if (null != i.HotelSearchResp.Hotels[0].RoomClasses && void 0 != i.HotelSearchResp.Hotels[0].RoomClasses) { var l = i.HotelSearchResp.Hotels[0].RoomClasses[0].Rooms[0].PricesRoomNightTA, t = i.HotelSearchResp.Hotels[0].MinAvailable, s = i.HotelSearchResp.Hotels[0].MinBlocked, a = i.HotelSearchResp.Hotels[0].IsShowAllotment, n = i.HotelSearchResp.Hotels[0].TypeLogin; console.log(a), 1 == n && (t > 0 || s > 0) && 1 == a && ($(".allotment-available", $(o)).text(t), $(".allotment-blocked", $(o)).text(s), $(".allotment-available").show(), $(".allotment-blocked").show()), l && ($(".price-num", $(o)).text(e(l) + " VND"), $(".img-update").hide()) } } else $(".price-num", $(o)).text("Không có giá"), $(".img-update").hide() }) }) }) }; return { init: function () { e(), l(), i(), t(), o(), a() } } }(); $(function () { App.init() });